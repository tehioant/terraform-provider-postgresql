version: "3"

services:
    postgres:
        build: .
        user: postgres
        environment:
            POSTGRES_PASSWORD: ${PGPASSWORD}
        command:
          - "postgres"
          - "-c"
          - "wal_level=logical"
          - "-c"
          - "max_replication_slots=10"
#        volumes:
#          - /Users/a.tehio-pesselet/Documents/Personal Project/terraform-provider-postgresql/tests/anon/anon-init.sql /docker-entrypoint-initdb.d/anon-init.sql
        ports:
            - 25432:5432
        healthcheck:
          test: [ "CMD-SHELL", "pg_isready" ]
          interval: 10s
          timeout: 5s
          retries: 5
#        command: postgres -c wal_level=logical -c max_replication_slots=10 -c shared_preload_libraries='anon'